{
	"id": "account/editAccount",
	"formDef": {
		"rows": [
			{
				"cols": [
					{
						"size": 6,
						"type": "text",
						"label": "Name",
						"value": "{{account.name}}",
						"isRequired": true
					},
					{
						"size": 6,
						"type": "select",
						"label": "Type",
						"value": "{{account.accountType}}",
						"dataSource": "Rest",
						"storage": "Full",
						"identity": "id",
						"enableAutocomplete": false,
						"queryUrl": "{{enumBaseUrl}}/account/codeAccountType",
						"path": "",
						"formatItem": "{{$item.name}}",
						"isRequired": true
					}
				]
			},
			{
				"cols": [
					{
						"size": 6,
						"type": "select",
						"label": "Main Contact",
						"value": "{{account.mainContact}}",
						"dataSource": "Rest",
						"storage": "Id",
						"lookupUrl": "{{apiBaseUrl}}/contact/contacts/{{$id}}",
						"identity": "id",
						"formatItem": "{{$item.caption}}",
						"queryUrl": "{{apiBaseUrl}}/contact/contacts?filter[account.id]={{account.id}}",
						"enableAutocomplete": false,
						"path": "",
						"enabled": "{{!!account.contactsInfo.length}}",
						"isRequired": "{{!!account.contactsInfo.length}}"
					},
					{
						"size": 6,
						"type": "select",
						"label": "Areas",
						"value": "{{account.areas}}",
						"dataSource": "Rest",
						"storage": "Full",
						"identity": "id",
						"multi": true,
						"enableAutocomplete": false,
						"queryUrl": "{{enumBaseUrl}}/account/codeArea",
						"formatItem": "{{$item.name}}"
					}
				]
			},
			{
				"cols": [
					{
						"size": 2,
						"type": "select",
						"label": "Reference currency",
						"value": "{{account.referenceCurrency}}",
						"dataSource": "Rest",
						"storage": "Full",
						"identity": "id",
						"enableAutocomplete": false,
						"queryUrl": "{{enumBaseUrl}}/account/codeCurrency",
						"path": "",
						"formatItem": "{{$item.name}}",
						"isRequired": true
					},
					{
						"size": 1,
						"type": "text",
						"label": "Net Worth",
						"value": "{{account.referenceCurrency.name}}",
						"enabled": false
					},
					{
						"size": 4,
						"type": "number",
						"label": "&nbsp",
						"value": "{{account.netWorth}}",
						"numberFormat": ".,",
						"isRequired": false,
						"enabled": false
					},
					{
						"size": 1,
						"type": "text",
						"label": "Net Income",
						"value": "{{account.referenceCurrency.name}}",
						"enabled": false
					},
					{
						"size": 4,
						"type": "number",
						"label": "&nbsp",
						"value": "{{account.netIncome}}",
						"numberFormat": ".,",
						"isRequired": false,
						"enabled": false
					}
				]
			},
			{
				"cols": [
					{
						"size": 12,
						"type": "textarea",
						"label": "Remarks",
						"value": "{{account.remarks}}"
					}
				]
			},
			{
				"cols": [
					{
						"type": "accordion",
						"size": 12,
						"visible": "{{!control.enabled}}",
						"initialSection": 0,
						"sections": [
							{
								"type": "panel",
								"label": "List of Contacts",
								"rows": [
									{
										"cols": [
											{
												"type": "dataTable",
												"label": "List of Contacts",
												"dataSource": "Static",
												"identity": "id",
												"formatItem": "{{$item.caption}}",
												"items": "{{account.contactsInfo}}",
												"target": "_self",
												"clientPagination": false,
												"showPagination": false,
												"showTotalRecords": false,
												"enabled": false,
												"columns": [
													{
														"label": "Name",
														"accessor": "name",
														"component": {
															"type": "link",
															"template": "link",
															"link": "/contact/{{$item.id}}",
															"value": "{{$item.caption}}",
															"styleClass": "{{$item.id === account.mainContact ? 'main-contact-bold' : '' }}"
														}
													},
													{
														"label": "Contact Role",
														"accessor": "contactRole.name",
														"component": {
															"type": "htmlComponent",
															"value": "{{$item.contactRole.name}}",
															"styleClass": "{{$item.id === account.mainContact ? 'main-contact-bold' : '' }}"
														}
													},
													{
														"label": "Age",
														"accessor": "birthDate",
														"component": {
															"type": "htmlComponent",
															"value": "{{$item.age !== 0 ? $item.age + ' years old' : '' }}",
															"styleClass": "{{$item.id === account.mainContact ? 'main-contact-bold' : '' }}"
														}
													},
													{
														"label": "Main Phone",
														"accessor": "phone",
														"component": {
															"type": "htmlComponent",
															"value": "{{$item.phone}}",
															"styleClass": "{{$item.id === account.mainContact ? 'main-contact-bold' : '' }}"
														}
													},
													{
														"label": "Main Email",
														"accessor": "email",
														"component": {
															"type": "htmlComponent",
															"value": "{{$item.email}}",
															"styleClass": "{{$item.id === account.mainContact ? 'main-contact-bold' : '' }}"
														}
													}
												]
											}
										]
									}
								]
							}
						]
					}
				]
			},
			{
				"cols": [
					{
						"type": "accordion",
						"visible": "{{!control.enabled}}",
						"sections": [
							{
								"type": "panel",
								"label": "System Information",
								"rows": [
									{
										"cols": [
											{
												"size": 6,
												"type": "text",
												"label": "Created By",
												"value": "{{account.meta.createdByUser.caption}}",
												"visible": "{{!control.enabled}}",
												"enabled": false
											},
											{
												"size": 6,
												"type": "date",
												"enableTime": true,
												"format": "dddd, DD.MM.YYYY HH:mm",
												"label": "&nbsp;",
												"value": "{{account.meta.createdAt}}",
												"visible": "{{!control.enabled}}",
												"enabled": false
											},
											{
												"size": 6,
												"type": "text",
												"label": "Last Modified By",
												"value": "{{account.meta.modifiedByUser.caption}}",
												"visible": "{{!control.enabled}}",
												"enabled": false
											},
											{
												"size": 6,
												"type": "date",
												"enableTime": true,
												"format": "dddd, DD.MM.YYYY HH:mm",
												"label": "&nbsp;",
												"value": "{{account.meta.modifiedAt}}",
												"visible": "{{!control.enabled}}",
												"enabled": false
											}
										]
									}
								]
							}
						]
					}
				]
			}
		]
	}
}